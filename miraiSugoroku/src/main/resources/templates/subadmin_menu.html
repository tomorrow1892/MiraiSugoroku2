<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
 <link rel="icon" th:href="@{/img/favicon.ico}">

    <link rel="apple-touch-icon" sizes="180x180" th:href="@{/img/kouminkun.png}" />
    <meta charset="UTF-8">
    <title>イベント管理</title>
    <link rel="stylesheet" th:href="@{/css/display.css}">
    <link rel="stylesheet" th:href="@{/css/admin.css}">
    <!-- bootstrapを使用する際には下２行を追加 -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.1.2/css/bootstrap.min.css}">
    <script th:src="@{/webjars/bootstrap/5.1.2/js/bootstrap.min.js}" type="text/javascript"></script>


</head>

<body class="body">


    <div class="mt-3 mb-3 d-flex justify-content-center">
        <h1 class="page_title">イベント管理</h1>
    </div>
    <div class="discription">
        イベントの管理画面です。<br>
        参加者の確認、マス承認を行うことができます。<br>
    </div>
    <div class="admin-menu">
        <div>
            <h2>「[[${event.name}]]」イベント</h2>
            <div class="d-flex justify-content-center p-3">
                <div class="m-3">
                    <h4>承認済みマス一覧</h4>
                    <form th:action="@{/subadmin/event/{eventId}/squarelist(eventId=${eventid})}" method="get">
                        <input type="submit" class="btn btn--orange-ad btn--cubic btn--shadow" value="マスを確認する">
                    </form>
                </div>
                <div class="m-3">
                    <h4>[[${str1}]]</h4>
                    <form th:action="@{/subadmin/event/{eventId}/approve(eventId=${eventid})}" method="get">
                        <input type="submit" class="btn btn--orange-ad btn--cubic btn--shadow" value="マスを承認する">
                    </form>
                </div>

            </div>

        </div>





        <h2>参加者一覧</h2>
        <h4>[[${str2}]]</h4>
        
            下のボタンで参加者情報をクリップボードにコピー出来ます。<br>
            Excelに貼り付けることができます。

        <form>
            <input onclick="copy()" class="btn btn--orange-ad btn--cubic btn--shadow" value="コピー">
        </form>
        <br>＊イベント参加者がまだ設定していない項目は空欄で表示されます。
        <table border="1" class="table" id="optional">
            <tr>
                <th>ログインID</th>
                <th>ニックネーム</th>
                <th>グループ</th>
            </tr>
            <tr th:each="clist: ${clist}">
                <td>[[${clist.loginId}]]</td>
                <td>[[${clist.nickname}]]</td>
                <td th:if="${clist.group == 0}"></td>
                <td th:if="${clist.group != 0}">[[${clist.group}]]</td>
                </td>
            </tr>
        </table>
        <br>
        <form th:action="@{/logout}" method="post">
            <input type="submit" class="btn btn-danger m-3" value="ログアウト">
        </form>
    </div>
</body>

<script>
    function copy() {
        //p要素の文字列を取得
        var text = document.getElementById("optional").innerText;

        //textareaを生成
        var area = document.createElement("textarea");

        //p要素の内容をtextareaに記述
        area.textContent = text;

        //生成したものをdocumentに追加
        document.body.appendChild(area);

        //選択/コピーして・・
        area.select();
        document.execCommand("copy");

        //すぐに消す。
        document.body.removeChild(area);
    }
</script>

</html>